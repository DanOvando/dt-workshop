---
title: "Eco-data-science data.table workshop"
output: html_notebook

---

### shortcuts

Run Chunk : *Cmd+Shift+Enter*

Insert Chunk : *Cmd+Option+I*

Preview HTML : *Cmd+Shift+K*

# packages

## install packages
```{r}
# install.packages("tidyverse")
# install.packages("data.table")
```

## load package(s)
```{r}
library(data.table)
```

# read in data

## file names
```{r}
hourly_data     = 'epa_ampd_hourly_2019_selected.csv'
facility_data   = 'facility_01-27-2021_224024745.csv'
```

## read in csv file

read in hourly data:
```{r}
dt = fread(here::here("data", hourly_data))
```

# operations

```{r}
setkey(dt, ORISPL_CODE, UNITID, OP_DATE, OP_HOUR)
```

## filter rows

### select rows for generators in California (CA)
```{r}
head(dt[STATE=="CA"])
```
### select rows that occurred after july 1, 2019
```{r}
head(dt[OP_DATE > "07-01-2019"])
```

## select columns

### select columns by name:
```{r}
head(dt[, .(ORISPL_CODE, UNITID, OP_DATE, OP_HOUR, OP_TIME, `GLOAD (MW)`, `SLOAD (1000lb/hr)`, `SO2_MASS (lbs)`)])
```
### select columns by column number/index
```{r}
head(dt[, c(3:10)])
```

## reshape between long and wide forms

## summarize/aggregate

### summarize by group(s)

### summarize several columns

### summarize several columns by group(s)

### summarize multiple functions on several columns by group(s)

## setkey?

# modify data table

## rename columns

## reorder rows

## add columns

### add columns by groups

## replace values

# joining data

## merge

## bind